{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport { getImages };\n\n//----------------------------------\n\n\nasync function getImages(imageName, page) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const params = new URLSearchParams({\n        key: '44085737-801aedd726c9c1496368a8656',\n        q: imageName,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: 15\n      })\n\n    const url = await axios(`${BASE_URL}?${params}`);\n    return url.data;\n}\n","export { imageTamplate };\n\n//----------------------------------\n\nfunction createMarkup({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n          </a>\n          <ul class=\"info\">\n            <li class=\"info-item\"> <b>Likes</b> ${likes} </li>\n            <li class=\"info-item\"> <b>Views</b> ${views} </li>\n            <li class=\"info-item\"> <b>Comments</b> ${comments} </li>\n            <li class=\"info-item\"> <b>Downloads</b> ${downloads} </li>\n          </ul>\n        </li>\n    `;\n}\n\nfunction imageTamplate(arr) {\n    return arr.map(createMarkup).join('');\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from './js/pixabay-api.js';\nimport { imageTamplate } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('.search-form');\nconst imageGallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\n\n//--------------------- MAIN ---------------------\n\nlet imageName = '';\nlet page = 0;\nlet perPage = 0;\nlet lastInputName = '';\n\nsearchForm.addEventListener('submit', onSubmit);\n\nfunction onSubmit(event) {\n    event.preventDefault();\n    imageName = searchForm.inputSearch.value.trim();\n    showLoader();\n\n    if (!imageName) {\n        return;\n    }\n    if (lastInputName !== imageName) {\n        page = 0;\n    }\n\n    imageGallery.innerHTML = '';\n\n    getImages(imageName, (page+=1))\n    .then(data => {\n        if (data.hits.length === 0) {\n            imageGallery.innerHTML = '';\n            loadMoreBtnHide();\n            return iziToast.error({ ...mainParams, ...errorParams });\n        }\n\n        const markup = imageTamplate(data.hits);\n\n        imageGallery.insertAdjacentHTML('afterbegin', markup);\n        lightbox.refresh();\n        perPage = data.hits.length;\n        loadMoreBtnShow();\n        lastInputName = imageName;\n    })\n    .catch(error => {\n        iziToast.error({ ...mainParams, message: error.message });\n    })\n    .finally(() => {\n        hideLoader();\n    });\n\n    return event.target.reset();\n}\n\n//---------------------Load More Button-----------------------\n\nloadMore.addEventListener('click', onLoadMore)\n\nasync function onLoadMore() {\n    loadMoreBtnHide();\n    showLoaderForBtn();\n\n    try {\n        const data = await getImages(imageName, (page += 1));\n        const markup = imageTamplate(data.hits);\n        perPage += data.hits.length;\n\n        if (perPage >= data.totalHits) {\n            return iziToast.info({ ...mainParams, ...infoParams });\n            hideLoader();\n        }\n\n        imageGallery.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n\n        loadMoreBtnShow();\n\n        const card = document.querySelector(\".gallery-item\");\n        const cardHeight = card.getBoundingClientRect().height * 2;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight,\n            behavior: \"smooth\",\n        })\n\n    } catch(error) {\n        alert(error.message)\n    } finally {\n        hideLoader();\n    }\n}\n\n//---------\n\nfunction loadMoreBtnShow() {\n    loadMore.style.display = 'block';\n}\nfunction loadMoreBtnHide() {\n    loadMore.style.display = 'none';\n}\n\n//---------------------Loader-----------------------\n\n\nfunction showLoader() {\n    loader.style.position = 'absolute';\n    loader.style.display = 'inline-block';\n}\nfunction showLoaderForBtn() {\n    loader.style.position = 'relative';\n    loader.style.display = 'inline-block';\n}\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\n//------------------iziToast params----------------\n\nconst mainParams = {\n    position: 'topRight',\n    timeout: 1800,\n    maxWidth: 300,\n    progressBar: false,\n}\nconst errorParams = {\n    icon: 'none',\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n}\nconst infoParams = {\n    message: 'We are sorry, but you have reached the end of search results.',\n}\n\n//------------------Simple Light box----------------\n\nlet lightbox = new SimpleLightbox(\".gallery a\", { captionDelay: 250, captionsData: \"alt\" });"],"names":["getImages","imageName","page","BASE_URL","params","axios","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imageTamplate","arr","searchForm","imageGallery","loader","loadMore","perPage","lastInputName","onSubmit","event","showLoader","data","loadMoreBtnHide","iziToast","mainParams","errorParams","markup","lightbox","loadMoreBtnShow","error","hideLoader","onLoadMore","showLoaderForBtn","infoParams","cardHeight","SimpleLightbox"],"mappings":"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"}