{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport { getImages, perPage };\n\n//----------------------------------\nconst perPage = 15;\n\nasync function getImages(imageName, page) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const params = new URLSearchParams({\n        key: '44085737-801aedd726c9c1496368a8656',\n        q: imageName,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage\n      })\n\n    const url = await axios(`${BASE_URL}?${params}`);\n    return url.data;\n}\n","export { imageTamplate };\n\n//----------------------------------\n\nfunction createMarkup({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) {\n    return `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n          </a>\n          <ul class=\"info\">\n            <li class=\"info-item\"> <b>Likes</b> ${likes} </li>\n            <li class=\"info-item\"> <b>Views</b> ${views} </li>\n            <li class=\"info-item\"> <b>Comments</b> ${comments} </li>\n            <li class=\"info-item\"> <b>Downloads</b> ${downloads} </li>\n          </ul>\n        </li>\n    `;\n}\n\nfunction imageTamplate(arr) {\n    return arr.map(createMarkup).join('');\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages, perPage } from './js/pixabay-api.js';\nimport { imageTamplate } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('.search-form');\nconst imageGallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load-more');\n\n//--------------------- MAIN ---------------------\n\nlet imageName = '';\nlet page = 0;\n\nsearchForm.addEventListener('submit', onSubmit);\n\nfunction onSubmit(event) {\n    event.preventDefault();\n    imageName = searchForm.inputSearch.value.trim();\n    loadMoreBtnHide()\n\n    if (!imageName) {\n        return;\n    }\n\n    showLoader();\n    imageGallery.innerHTML = '';\n\n    getImages(imageName, (page = 1))\n    .then(data => {\n        if (data.hits.length === 0) {\n            imageGallery.innerHTML = '';\n            loadMoreBtnHide();\n            return iziToast.error({ ...mainParams, ...errorParams });\n        }\n\n        const markup = imageTamplate(data.hits);\n\n        imageGallery.insertAdjacentHTML('afterbegin', markup);\n        lightbox.refresh();\n        loadMoreBtnShow();\n    })\n    .catch(error => {\n        iziToast.error({ ...mainParams, message: error.message });\n    })\n    .finally(() => {\n        hideLoader();\n    });\n\n    return event.target.reset();\n}\n\n//---------------------Load More Button-----------------------\n\nloadMore.addEventListener('click', onLoadMore)\n\nasync function onLoadMore() {\n    loadMoreBtnHide();\n    showLoaderForBtn();\n\n    try {\n        const data = await getImages(imageName, (page += 1));\n        const markup = imageTamplate(data.hits);\n        let pageCounter = page * perPage;\n\n        imageGallery.insertAdjacentHTML('beforeend', markup);\n        lightbox.refresh();\n        loadMoreBtnShow();\n\n        if (pageCounter >= data.totalHits) {\n            loadMoreBtnHide()\n            iziToast.info({ ...mainParams, ...infoParams });\n            hideLoader();\n        }\n\n        const card = document.querySelector(\".gallery-item\");\n        const cardHeight = card.getBoundingClientRect().height * 2;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight,\n            behavior: \"smooth\",\n        })\n\n    } catch(error) {\n        alert(error.message)\n    } finally {\n        hideLoader();\n    }\n}\n\n//---------\n\nfunction loadMoreBtnShow() {\n    loadMore.style.display = 'block';\n}\nfunction loadMoreBtnHide() {\n    loadMore.style.display = 'none';\n}\n\n//---------------------Loader-----------------------\n\n\nfunction showLoader() {\n    loader.style.position = 'absolute';\n    loader.style.display = 'inline-block';\n}\nfunction showLoaderForBtn() {\n    loader.style.position = 'relative';\n    loader.style.display = 'inline-block';\n}\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\n//------------------iziToast params----------------\n\nconst mainParams = {\n    position: 'topRight',\n    timeout: 1800,\n    maxWidth: 300,\n    progressBar: false,\n}\nconst errorParams = {\n    icon: 'none',\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n}\nconst infoParams = {\n    message: 'We are sorry, but you have reached the end of search results.',\n}\n\n//------------------Simple Light box----------------\n\nlet lightbox = new SimpleLightbox(\".gallery a\", { captionDelay: 250, captionsData: \"alt\" });"],"names":["perPage","getImages","imageName","page","BASE_URL","params","axios","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imageTamplate","arr","searchForm","imageGallery","loader","loadMore","onSubmit","event","loadMoreBtnHide","showLoader","data","iziToast","mainParams","errorParams","markup","lightbox","loadMoreBtnShow","error","hideLoader","onLoadMore","showLoaderForBtn","pageCounter","infoParams","cardHeight","SimpleLightbox"],"mappings":"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"}